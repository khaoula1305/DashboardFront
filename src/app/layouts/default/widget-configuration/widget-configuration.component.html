<form (ngSubmit)="onSubmit(widash)" #widash="ngForm">
<div class="p-grid" *ngIf="load">

  <div class="p-col-12">
    <h4>Configure widget</h4>
  </div>
  <div class="p-col-fixed" style="width: 670px">
    <div class="box">
      <div *ngIf="load" [ngSwitch]="selectedWidgetType.type">
        <div *ngSwitchCase="widgetTypeEnum.Table">
            <p-table [value]="results" [scrollable]="true" scrollHeight="700px">
                <ng-template pTemplate="header">
                    <tr>
                        <th  *ngFor="let th of selectedKeys" >{{th.label}}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-tab>
                    <tr>
                        <td  *ngFor="let th of selectedKeys">{{tab[th.key]}}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        <div *ngSwitchCase="widgetTypeEnum.Card">
                <p-card class="containSize partition" styleClass="cardColor">
                    <div class="p-d-flex">
                        <p  style="font-weight: bold;">{{result.label}}</p>
                    <p-divider layout="vertical" ></p-divider>
                    <p  style="font-weight: 500;">{{result.key}}</p>
                    </div>
                </p-card>
        </div>
        <div *ngSwitchDefault> 
            <p-chart type="{{selectedWidgetType.type}}" [data]="basicData" [options]="basicOptions">
            </p-chart>
          </div>
    </div>
    </div>
  </div>
    <div class="p-col">
      <div class="box">
        <h5>Title</h5>
        <input type="text" 
               pInputText 
               [(ngModel)]="dashboardWidget.title"
               name="title" />
        <h5>Description</h5>
        <textarea
          name="description"
          type="text"
          rows="4"
          pInputTextarea
          [(ngModel)]="dashboardWidget.description"
        ></textarea>
      </div>
    </div>
    <div class="p-col-12 Col12">
      <p-divider></p-divider>
    </div>
    <div class="p-col-6" >
      <div class="p-fluid p-formgrid p-grid">
        <div class="p-field p-col">
          <label for="visualisation">Visualisation</label>
          <p-dropdown 
          [options]="widgetTypes" 
          [(ngModel)]="selectedWidgetType" 
          name= "selectedWidgetType" 
          (ngModelChange)="SelectedWidgetType()"
          optionLabel="type" 
          [filter]="true" 
          filterBy="type" 
          [showClear]="true" 
          placeholder="Select a visualisation">
          <ng-template pTemplate="selectedItem">
            <div
              class="widgetType-item widgetType-item-value"
              *ngIf="selectedWidgetType.type"
            >
              <div class="center">
                <img src="{{ selectedWidgetType.imagePath }}" alt="{{selectedWidgetType.type}}" />
                {{ selectedWidgetType.type }}
              </div>
            </div>
          </ng-template>
          <ng-template let-widgetType pTemplate="item">
            <div class="widgetType-item">
              <div class="center">
                <img src="{{ widgetType.imagePath }}" alt="{{widgetType.type}}" /> {{ widgetType.type }}
              </div>
            </div>
          </ng-template>
        </p-dropdown>
        </div>
      </div>
    </div>
    <div class="p-col-6">
      <p-button
        label="Save"
        icon="pi pi-check"
        type="submit"
        iconPos="left"
      ></p-button>
    </div>
</div>
</form>
