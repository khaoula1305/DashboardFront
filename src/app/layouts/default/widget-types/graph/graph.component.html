<div class="p-grid">
    <div class="p-col-12">
        <div class="p-field p-col" *ngIf="newWidget">
            <label for="query">Queries</label>
            <p-dropdown inputId="query" name="selectedQuery" [options]="queries" [(ngModel)]="selectedQuery"
                placeholder="Select" (ngModelChange)="onSelectedQuery()" optionLabel="title"></p-dropdown>
        </div>
    </div>
    <div class="p-col-6">
        <div class="p-field p-col" *ngIf="showKeys">
            <div class="p-col-12" *ngIf="newWidget">
                <label>Dimension</label> <br>
                <p-dropdown name="dimensionKey" [options]="allKeys" [(ngModel)]="dimensionKey" editable="true"
                    optionLabel="key" (ngModelChange)="onSelectedDimension($event)"></p-dropdown>
            </div>
            <br>
            <div class="card">
                <p-splitter [style]="{'height': '300px','width': '100px'}" styleClass="p-mb-5">
                    <ng-template pTemplate *ngIf="newWidget">
                        <div class="p-col p-d-flex p-ai-center p-jc-center">
                            <p-table [value]="allKeys" [scrollable]="true" scrollHeight="250px"
                                [style]="{width:'300px'}">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Mesures</th>
                                        <th> </th>
                                        <th> </th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-tab>
                                    <tr>
                                        <td>{{tab.key}}</td>
                                        <td> </td>
                                        <td>
                                            <p-button (click)="onSelectedKey(tab.key, tab.id)" icon="pi pi-check">
                                            </p-button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </ng-template>
                    <ng-template pTemplate>
                        <div class="p-col p-d-flex p-ai-center p-jc-center">
                            <div class="p-field p-col" *ngIf="showKeys">
                                <div class="card">
                                    <p-table [value]="selectedKeys" [scrollable]="true" scrollHeight="250px"
                                        [style]="{width:'500px'}">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>Selected Keys</th>
                                                <th>Labels</th>
                                                <th> </th>

                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-tab>
                                            <tr>
                                                <td>{{tab.key}}</td>
                                                <td>
                                                    <input type="text" pInputText [(ngModel)]="tab.label"
                                                        name="{{tab.label}}" placeholder="Add a label" />
                                                </td>
                                                <td>
                                                    <p-button (click)="onRemovedKey(tab.key, tab.id)"
                                                        icon="pi pi-times"></p-button>
                                                </td>
                                            </tr>
                                        </ng-template>
                                    </p-table>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </p-splitter>
            </div>
        </div>
        <div class="p-col-12" *ngIf="labelsWrited">
            <p-button label="Preview" [disabled]="preview" icon="pi pi-check" (click)="draw()" iconPos="left">
            </p-button>
        </div>
        <div class="p-col-fixed" style="width: 670px" *ngIf="drawType && selectedKeys.length!=0">
            <div class="box">
                <p-chart
                type="{{selectedWidgetType.type}}"
                [data]="basicData"
                [options]="basicOptions"
              ></p-chart>
            </div>
        </div>
    </div>
    <div class="p-col-12 Col12">
        <p-divider></p-divider>
      </div>
    
     <div class="p-col-12">
        <p-button
          label="Save"
          icon="pi pi-check"
          (click)="onSendData()"
          iconPos="left"
        ></p-button>
      </div>
</div>