<div class="p-grid">
    <div class="p-col-6">
        <div class="p-field p-col" *ngIf="showKeys">
            <div class="card">
                <p-splitter [style]="{'height': '300px','width': '100px'}" styleClass="p-mb-5">
                    <ng-template pTemplate>
                        <div class="p-col p-d-flex p-ai-center p-jc-center">
                            <p-table [value]="allKeys" [scrollable]="true" scrollHeight="250px"
                                [style]="{width:'300px'}">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Mesures</th>
                                        <th> </th>
                                        <th> </th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-tab>
                                    <tr>
                                        <td>{{tab.key}}</td>
                                        <td> </td>
                                        <td>
                                            <p-button (click)="onSelectedKey(tab.key, tab.id)" icon="pi pi-check">
                                            </p-button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </ng-template>
                    <ng-template pTemplate>
                        <div class="p-col p-d-flex p-ai-center p-jc-center">
                            <div class="p-field p-col" *ngIf="showKeys">
                                <div class="card">
                                    <p-table [value]="widget.metaDataSourceDataModels" [scrollable]="true" scrollHeight="250px"
                                        [style]="{width:'500px'}">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>Selected Keys</th>
                                                <th>Labels</th>
                                                <th> </th>

                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-tab>
                                            <tr>
                                                <td>{{tab.key}}</td>
                                                <td>
                                                    <input type="text" pInputText [(ngModel)]="tab.label"
                                                        name="{{tab.label}}" placeholder="Add a label" />
                                                </td>
                                                <td>
                                                    <p-button (click)="onRemovedKey(tab.key, tab.id)"
                                                        icon="pi pi-times"></p-button>
                                                </td>
                                            </tr>
                                        </ng-template>
                                    </p-table>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </p-splitter>
            </div>
        </div>
        <div class="p-col-12" *ngIf="widget.metaDataSourceDataModels">
            <p-button label="Preview" [disabled]="preview" icon="pi pi-check" (click)="drawTable()" iconPos="left">
            </p-button>
        </div>
        <div class="p-col-fixed" style="width: 670px" *ngIf="drawType && widget.metaDataSourceDataModels.length!=0">
            <div class="box">
                <p-table [value]="results" [scrollable]="true" scrollHeight="400px" scrollWidth="900px">
                    <ng-template pTemplate="header">
                        <tr>
                            <th *ngFor="let th of widget.metaDataSourceDataModels">{{th.label}}</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-tab>
                        <tr>
                            <td *ngFor="let th of widget.metaDataSourceDataModels">{{tab[th.key]}}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>

    <div class="p-col-12 Col12">
        <p-divider></p-divider>
    </div>

    <div class="p-col-12">
        <p-button label="Save" icon="pi pi-check" (click)="onSendData()" iconPos="left"></p-button>
    </div>

</div>